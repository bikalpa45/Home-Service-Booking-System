{% extends 'index.html' %}
{% load static %}
{% block body %}
{% if terror %}
<script>
    alert('Booking Successful,we will contact you soon');
    window.location=('{% url 'customer_order' %}');
</script>
{% endif %}

	{% comment %} <div class="w3l_banner_info" style="height:10px">
		<div class="slider1">
			<div class="callbacks_container">
				<ul class="rslides" id="slider3">
					<li>
						<div class="slider1-img" style="height:90px">
							<div class="slider_banner_info">


							</div>
						</div>
					</li>


				</ul>
			</div>
		</div>
	</div> {% endcomment %}
</div>
</header>

<section class="contact " id="contact" style="margin-top:7%">
<h3>Booking Form</h3><iframe style="height:0"></iframe>
	<!-- contact -->
	<section id="contact" style="padding:0px">
		<div class="container">
			<h5 class="w3ls-title text-center text-uppercase pb-md-5 pb-4"></h5>
			<div class="row contact-form ">
                <div class="col-lg-6  mt-lg-0 mt-5 map contact-right">

					<div class="address mt-3">
						<h5 class="pb-3 text-capitalize"></h5>
						<address>
							<img src="{% static 'images/book.jpg' %}" style="width:100%" alt/>
						</address>
					</div>
				</div>
				<div class="col-lg-6 wthree-form-left">
					<!-- contact form grid -->
					<div class="contact-top1">
						<form  id="myform" action="#" method="post" class="f-color" enctype="multipart/form-data">
                            {% csrf_token %}
							<div class="row">
                                <div class="col-md-12">
								<label for="contactusername">Name</label>
                                    <input class="form-control" type="text" name="name" value="{{ser.user.first_name}}" readonly required="">
							</div>
                                <div class="col-md-12">
								<label for="contactemail">Mobile</label>
                                  <input class="form-control" type="text" name="contact" value="{{ser.contact}}" required="" readonly>
							</div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
								<label for="contactusername">Address</label>
                                        <input class="form-control" type="text" name="add" value="{{ser.address}}" required="" readonly>
							</div>
							<div class="col-md-12">
								<label for="date">Date</label>
								<input class="form-control" type="date" id="date" name="date" required="">
							</div>
							<div class="col-md-12">
								<label for="start_time">Start Time</label>
								<input class="form-control" type="time" id="start_time" name="start_time" min="06:00" max="18:00" required="">
								<div class="error" id="startTimeError"></div>
							</div>
							
							<div class="col-md-12">
								<label for="end_time">End Time</label>
								<input class="form-control" type="time" id="end_time" name="end_time" min="06:00" max="18:00" required="">
								<div class="error" id="endTimeError"></div>
							</div>

							<center><button type="submit" class="btn btn-info" style="margin-top:5%;width:90%">Book Now</button></center>
						</form>
							</div>
					<!--  //contact form grid ends here -->
				</div>
				<!-- contact details -->
				<!-- contact map grid -->

				<!--//contact map grid ends here-->
			</div>
        </div>
		{% if conflict %}
		<script>
			var conflictTimes = "{{ conflict_times|join:', ' }}";
			alert('Booking Conflict: This service person is already booked for the following time slots: ' + conflictTimes);
		</script>
		{% endif %}
		

		<script>
			document.addEventListener('DOMContentLoaded', function() {
			
				var today = new Date().toISOString().split('T')[0];
				
				document.getElementById('date').setAttribute('min', today);
			});
			document.getElementById('myForm').addEventListener('submit', function(event) {
				// Clear previous error messages
				document.getElementById('dayError').textContent = '';
				document.getElementById('hourError').textContent = '';
	
				var daySelect = document.getElementById('day');
				var hourSelect = document.getElementById('hour');
				var valid = false;
	
				if (daySelect.value !== "" || hourSelect.value !== "") {
					valid = true;
				} else {
					if (daySelect.value === "") {
						document.getElementById('dayError').textContent = 'Please select a day.';
					}
					if (hourSelect.value === "") {
						document.getElementById('hourError').textContent = 'Please select an hour range.';
					}
				}
	
				if (!valid) {
					event.preventDefault(); // Prevent form submission
				}
			});
//for time 

document.getElementById('myForm').addEventListener('submit', function(event) {
    // Clear previous error messages
    document.getElementById('startTimeError').textContent = '';
    document.getElementById('endTimeError').textContent = '';

    var startTimeSelect = document.getElementById('start_time');
    var endTimeSelect = document.getElementById('end_time');
    var valid = true;

    var startTime = startTimeSelect.value;
    var endTime = endTimeSelect.value;

    // Ensure both times are filled and valid
    if (startTime === "" || endTime === "" || startTime < "06:00" || endTime > "18:00" || endTime <= startTime) {
        document.getElementById('startTimeError').textContent = 'Please select a valid time between 6 AM and 6 PM.';
        valid = false;
    }

    if (!valid) {
        event.preventDefault(); // Prevent form submission if validation fails
    }
});

			
				
		</script>
		
	</section>
	</section>
	<!-- //contact -->

{% endblock %}